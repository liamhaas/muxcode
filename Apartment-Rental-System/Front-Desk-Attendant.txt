@lock Front Desk Attendant=me
drop Front Desk Attendant
@set Front Desk Attendant=monitor
@va Front Desk Attendant=^reg sup *~*:&supnumlist me=ifelse(eq(0,match(get(Front Desk Attendant/supnumlist),%1)),strcat(get(Front Desk Attendant/supnumlist),%1,%b),get(Front Desk Attendant/supnumlist));&supfloorlist me=ifelse(eq(0,match(get(Front Desk Attendant/supfloorlist),%0)),strcat(get(Front Desk Attendant/supfloorlist),%0,%b),get(Front Desk Attendant/supfloorlist));
@vb Front Desk Attendant=^reg dir *~*:&dirnumlist me=ifelse(eq(0,match(get(Front Desk Attendant/dirnumlist),%1)),strcat(get(Front Desk Attendant/dirnumlist),%1,%b),get(Front Desk Attendant/dirnumlist));&dirfloorlist me=ifelse(eq(0,match(get(Front Desk Attendant/dirfloorlist),%0)),strcat(get(Front Desk Attendant/dirfloorlist),%0,%b),get(Front Desk Attendant/dirfloorlist));
&roomsavail Front Desk Attendant=101 102 103 104 105 106 107 108 109 109 201 202 203 204 205 206 207 208 209 301 302 303 304 305 306 307 308 309 401 402 403 404 405 406 407 408 409
&broomsavail Front Desk Attendant=B01 B02 B03 B04 B05 B06 B07 B08 B09
&troomsavail Front Desk Attendant=T01 T02 T03 T04 T05 T06 T07 T08 T09
&bad-response-1p Front Desk Attendant=The attendant shakes her head at you, sadly but resolutely. "I'm sorry, hon, but I've got no available apartments like that right now."
&bad-response-1o Front Desk Attendant=The attendant shakes her head at @@, sadly but resolutely. "I'm sorry, hon, but I've got no available apartments like that right now."
&bad-response-2p Front Desk Attendant=The attendant squints one eye at you, thinking. "Haven't I seen... yeah, I knew it. You're already renting a place with us! You can't rent TWO apartments."
&bad-response-2o Front Desk Attendant=The attendant squints one eye at @@, thinking. "Haven't I seen... yeah, I knew it. You're already renting a place with us! You can't rent TWO apartments."
&bad-response-3p Front Desk Attendant=The attendant huffs a laugh at you. "I may be missin' an eye, sugar, but I'm not blind. This place is strictly for the metabolically challenged, you understand?"
&bad-response-3o Front Desk Attendant=The attendant huffs a laugh at @@. "I may be missin' an eye, sugar, but I'm not blind. This place is strictly for the metabolically challenged, you understand?"
&good-response-p Front Desk Attendant=The attendant nods to you, then turns to rifle through some keys in a drawer. She fishes one out, passes it through some sort of device, then hands it to you. "Sure, sure. I've got a place open on floor
&good-response-o Front Desk Attendant=The attendant nods to @@, then turns to rifle through some keys in a drawer. She fishes one out, passes it through some sort of device, then hands it over. "Sure, sure. I've got a place open on floor
&good-response-pb Front Desk Attendant=The attendant nods to you, then turns to rifle through some keys in a drawer. She fishes one out, passes it through some sort of device, then hands it to you. "Sure, sure. I've got a place open down there. Just talk to the superintendent just down the steps, and he'll set you up!"
&good-response-ob Front Desk Attendant=The attendant nods to @@, then turns to rifle through some keys in a drawer. She fishes one out, passes it through some sort of device, then hands it over. "Sure, sure. I've got a place open down there. Just talk to the superintendent just down the steps, and he'll set you up!"
&good-response-pt Front Desk Attendant=The attendant nods to you, then turns to rifle through some keys in a drawer. She fishes one out, passes it through some sort of device, then hands it to you. "Sure, sure. I've got a place open all the way up there. Lots of space, nice views! Just talk to the superintendent up there, and he'll set you up!"
&good-response-ot Front Desk Attendant=The attendant nods to @@, then turns to rifle through some keys in a drawer. She fishes one out, passes it through some sort of device, then hands it over. "Sure, sure. I've got a place open all the way up there. Lots of space, nice views! Just talk to the superintendent up there, and he'll set you up!"
&cmd-rent Front Desk Attendant=$rent standard:&temp_verify me=switch(0,gte(strlen([v(roomsavail)]),3),bad1,eq(0,match([v(renterslist)],%#)),bad2,eq(get(%#/zombie),1),bad3,good);&temp_roomnum me=ifelse(strmatch([v(temp_verify)],good),first([v(roomsavail)]),x);&roomstaken me=ifelse(strmatch([v(temp_verify)],good),strcat([v(roomstaken)],[v(temp_roomnum)],%b),[v(roomstaken)]);&roomsavail me=ifelse(strmatch([v(temp_verify)],good),rest([v(roomsavail)]),[v(roomsavail)]);&renterslist me=ifelse(strmatch([v(temp_verify)],good),strcat([v(renterslist)],%#,%b),[v(renterslist)]);@create bloop;@parent bloop=#MKNUM;@desc bloop=A mostly typical brass key\, with an odd electronic shimmer over its surface. Printed on one face are the words "The Undead Arms" and below that\, the number [v(temp_roomnum)]. On the reverse it simply says DO NOT REPLICATE.;&keycode bloop=encrypt([v(temp_roomnum)],%n);@set bloop=monitor;@va bloop=^blark *~*:&roomdbref me=%0;%exitdbref me=%1;&assigned bloop=%#;&roomnum bloop=[v(temp_roomnum)];&mysuper bloop=elements(get(me/supnumlist),member(get(me/supfloorlist),mid([v(temp_roomnum)],0,1)));&mydirectory bloop=elements(get(me/dirnumlist),member(get(me/dirfloorlist),mid([v(temp_roomnum)],0,1)));@pemit %#=switch([v(temp_verify)],bad1,[v(bad-response-1p)],bad2,[v(bad-response-2p)],bad3,[v(bad-response-3p)],good,strcat([v(good-response-p)],%b,mid([v(temp_roomnum)],0,1),. Just talk to the superintendent there and he'll set you up!"),Error: Fish.);@oemit %#=switch([v(temp_verify)],bad1,strcat(before([v(bad-response-1o)],@@),%n,after([v(bad-response-1o)],@@)),bad2,strcat(before([v(bad-response-2o)],@@),%n,after([v(bad-response-2o)],@@)),bad3,strcat(before([v(bad-response-3o)],@@),%n,after([v(bad-response-3o)],@@)),good,strcat(before([v(good-response-o)],@@),%n,after([v(good-response-o)],@@),%b,mid([v(temp_roomnum)],0,1),. Just talk to the superintendent there and he'll set you up!"),Error: Fish.);@name bloop=ifelse(strmatch([v(temp_verify)],good),strcat(Apartment Key -,%b,[v(temp_roomnum)]),bloop);give %#=Apartment Key;drop Apartment Key;&temp_verify me=;&temp_roomnum me=;@destroy/instant bloop
&cmd-brent Front Desk Attendant=$rent basement: &temp_verify me=switch(0,gte(strlen([v(broomsavail)]),3),bad1,eq(0,match([v(renterslist)],%#)),bad2,eq(get(%#/zombie),1),bad3,good); &temp_roomnum me=ifelse(strmatch([v(temp_verify)],good),first([v(broomsavail)]),x); &broomstaken me=ifelse(strmatch([v(temp_verify)],good),strcat([v(broomstaken)],[v(temp_roomnum)],%b),[v(broomstaken)]); &broomsavail me=ifelse(strmatch([v(temp_verify)],good),rest([v(broomsavail)]),[v(broomsavail)]); &renterslist me=ifelse(strmatch([v(temp_verify)],good),strcat([v(renterslist)],%#,%b),[v(renterslist)]); @create bloop; @parent bloop=#MKNUM; @desc bloop=A mostly typical brass key\, with an odd electronic shimmer over its surface. Printed on one face are the words "The Undead Arms" and below that\, the number [v(temp_roomnum)]. On the reverse it simply says DO NOT REPLICATE.; &keycode bloop=encrypt([v(temp_roomnum)],%n); @set bloop=monitor; @va bloop=^blark *~*:&roomdbref me=%0; %exitdbref me=%1; &assigned bloop=%#; &roomnum bloop=[v(temp_roomnum)]; &mysuper bloop=elements(get(me/supnumlist),member(get(me/supfloorlist),mid([v(temp_roomnum)],0,1))); &mydirectory bloop=elements(get(me/dirnumlist),member(get(me/dirfloorlist),mid([v(temp_roomnum)],0,1))); @pemit %#=switch([v(temp_verify)],bad1,[v(bad-response-1p)],bad2,[v(bad-response-2p)],bad3,[v(bad-response-3p)],good,strcat([v(good-response-p)],%b,mid([v(temp_roomnum)],0,1),. Just talk to the superintendent there and he'll set you up!"),Error: Fish.); @oemit %#=switch([v(temp_verify)],bad1,strcat(before([v(bad-response-1o)],@@),%n,after([v(bad-response-1o)],@@)),bad2,strcat(before([v(bad-response-2o)],@@),%n,after([v(bad-response-2o)],@@)),bad3,strcat(before([v(bad-response-3o)],@@),%n,after([v(bad-response-3o)],@@)),good,strcat(before([v(good-response-o)],@@),%n,after([v(good-response-o)],@@),%b,mid([v(temp_roomnum)],0,1),. Just talk to the superintendent there and he'll set you up!"),Error: Fish.); @name bloop=ifelse(strmatch([v(temp_verify)],good),strcat(Apartment Key -,%b,[v(temp_roomnum)]),bloop); give %#=Apartment Key; drop Apartment Key; &temp_verify me=; &temp_roomnum me=; @destroy/instant bloop
&cmd-trent Front Desk Attendant=$rent top: &temp_verify me=switch(0,gte(strlen([v(troomsavail)]),3),bad1,eq(0,match([v(renterslist)],%#)),bad2,eq(get(%#/zombie),1),bad3,good); &temp_roomnum me=ifelse(strmatch([v(temp_verify)],good),first([v(troomsavail)]),x); &troomstaken me=ifelse(strmatch([v(temp_verify)],good),strcat([v(troomstaken)],[v(temp_roomnum)],%b),[v(troomstaken)]); &troomsavail me=ifelse(strmatch([v(temp_verify)],good),rest([v(troomsavail)]),[v(troomsavail)]); &renterslist me=ifelse(strmatch([v(temp_verify)],good),strcat([v(renterslist)],%#,%b),[v(renterslist)]); @create bloop; @parent bloop=#MKNUM; @desc bloop=A mostly typical brass key\, with an odd electronic shimmer over its surface. Printed on one face are the words "The Undead Arms" and below that\, the number [v(temp_roomnum)]. On the reverse it simply says DO NOT REPLICATE.; &keycode bloop=encrypt([v(temp_roomnum)],%n); @set bloop=monitor; @va bloop=^blark *~*:&roomdbref me=%0; %exitdbref me=%1; &assigned bloop=%#; &roomnum bloop=[v(temp_roomnum)]; &mysuper bloop=elements(get(me/supnumlist),member(get(me/supfloorlist),mid([v(temp_roomnum)],0,1))); &mydirectory bloop=elements(get(me/dirnumlist),member(get(me/dirfloorlist),mid([v(temp_roomnum)],0,1))); @pemit %#=switch([v(temp_verify)],bad1,[v(bad-response-1p)],bad2,[v(bad-response-2p)],bad3,[v(bad-response-3p)],good,strcat([v(good-response-p)],%b,mid([v(temp_roomnum)],0,1),. Just talk to the superintendent there and he'll set you up!"),Error: Fish.); @oemit %#=switch([v(temp_verify)],bad1,strcat(before([v(bad-response-1o)],@@),%n,after([v(bad-response-1o)],@@)),bad2,strcat(before([v(bad-response-2o)],@@),%n,after([v(bad-response-2o)],@@)),bad3,strcat(before([v(bad-response-3o)],@@),%n,after([v(bad-response-3o)],@@)),good,strcat(before([v(good-response-o)],@@),%n,after([v(good-response-o)],@@),%b,mid([v(temp_roomnum)],0,1),. Just talk to the superintendent there and he'll set you up!"),Error: Fish.); @name bloop=ifelse(strmatch([v(temp_verify)],good),strcat(Apartment Key -,%b,[v(temp_roomnum)]),bloop); give %#=Apartment Key; drop Apartment Key; &temp_verify me=; &temp_roomnum me=; @destroy/instant bloop
